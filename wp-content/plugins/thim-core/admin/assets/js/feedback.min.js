!function(d,n){var e=Backbone.Model.extend({}),t=Backbone.View.extend({el:"#tc-send-feedback",events:{"click .btn-send":"onClickSend","change .developer-access input":"onChangeIncludeAccess"},model:null,onChangeIncludeAccess:function(e){var n=d(e.currentTarget),t=n.prop("checked")?"yes":"no";n.val(t)},onClickSend:function(e){this.$el.find(".btn-send").attr("disabled",!0).addClass("updating-message"),this.$el.find(".md-content").addClass("sending"),this.send()},send:function(){var n=this,e=this.model.get("ajax_url"),t=this.$el.find(".info").serialize();return d.ajax({url:e,method:"POST",data:t,dataType:"json"}).complete(function(){n.complete()}).success(function(e){e&&e.success?n.success(e.data):n.failed(e.data||n.model.get("wrong"))}).error(function(e){n.failed(n.model.get("wrong"))})},success:function(e){this.$el.find(".md-content").addClass("success"),this.$el.find(".messages .content").text(e)},failed:function(e){this.$el.find(".md-content").addClass("failed"),this.$el.find(".messages .content").text(e)},complete:function(){this.$el.find(".md-content").removeClass("sending").addClass("complete"),this.$el.find(".btn-send").removeClass("updating-message").attr("disabled",!1)},initialize:function(){this.model=new e(thim_core_feedback),d(document).on("click",".thim-core-open-send-feedback",function(e){e.preventDefault(),n.check_active()&&d(window).trigger("thim_core_trigger_open_modal","tc-send-feedback")}),d(window).on("thim_modal_open",this.onOpenModal.bind(this))},onOpenModal:function(e,n){"#tc-send-feedback"===n&&this.$el.find(".content textarea").focus()}});d(document).ready(function(){new t})}(jQuery,window.Thim_Core);