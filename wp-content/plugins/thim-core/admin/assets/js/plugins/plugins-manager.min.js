!function(g,a,m,u){g(document).ready(function(){t.init()});var t={init:function(){this.filter_search(),this.onEvent(),this.count(),this.initRouting()},initRouting:function(){var t=window.location.hash,n=g('.filter-links a[href="'+t+'"]');n&&n.click()},count:function(){var t=g(".list-plugins .plugin-card").length,n=g(".list-plugins .plugin-card.required").length,i=g(".list-plugins .plugin-card.recommended").length,e=g(".list-plugins .plugin-card.can-update").length;function a(t,n){var i=g(".filter-links ."+t+" a");i&&i.find("span").text(n)}a("all",t),a("required",n),a("recommended",i),a("updates",e);var u=g("#thim-core-count-notification");u.each(function(t,n){n.className=n.className.replace(/count-\d+/,"count-"+e)}),0<e?u.find(".plugin-count").text(e):u.remove(),e?g(".filter-links .updates").addClass("active"):g(".filter-links .updates").removeClass("active")},filter_search:function(){var e,a,t=g(".thim-wrapper .plugin-tab"),n=t.find(".filter-links"),i=t.find("#plugin-filter").find(".list-plugins").isotope({filter:function(){var t=g(this),n=!e||t.find(".name").text().match(e),i=!a||t.is(a);return n&&i}});n.on("click","li",function(){n.find("li a").removeClass("current"),g(this).find("a").addClass("current"),a=g(this).data("filter"),i.isotope()});var u=g(".wp-filter-search").keyup(this.debounce(function(){e=new RegExp(u.val(),"gi"),i.isotope()}))},debounce:function(t,n){var i;return function(){i&&clearTimeout(i),i=setTimeout(function(){t(),i=null},n||100)}},onEvent:function(){var p=this;a.success(function(t,n){if(t.success){var i=t.data,e=i.action,a=i.slug,u=i.status,s=g(document).find(".plugin-card.plugin-card-"+a),o=s.find(".plugin-action-buttons .button");o.text(i.text),o.attr("data-action",e),s.removeClass("can-update"),s.attr("data-status",u);var c=i.info;s.find(".data_Version").text(c.Version),p.count(),"update"===n.action&&m.updates.decrementCount("plugin")}else{for(var l=t.data.messages,r="",d=0;d<l.length;d++)r+=(f=l[d],g("<textarea></textarea>").html(f).text()+"\n");alert(r)}var f}),a.error(function(t,n){var i=t.slug;g(document).find(".plugin-card.plugin-card-"+i).find(".plugin-action-buttons .button").text("Failed")}),a.complete(function(t){var n=t.slug,i=g(document).find(".plugin-card.plugin-card-"+n).find(".plugin-action-buttons .button");i.attr("disabled",!1),i.removeClass("updating-message")}),g(document).on("click",".plugin-action-buttons button:not(.updating-message)",function(t){t.preventDefault();var n,i=g(this),e=i.attr("data-action");"update"===e&&!u.check_active()||(i.addClass("updating-message"),i.attr("disabled",!0),n=i.parents(".plugin-action-buttons").data("slug"),a.push({action:e,slug:n}))})}}}(jQuery,(Thim_Plugins,Thim_Plugins_Queue),window.wp,window.Thim_Core);