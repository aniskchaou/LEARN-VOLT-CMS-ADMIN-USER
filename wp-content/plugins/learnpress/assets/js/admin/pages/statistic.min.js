!function(t){t(document).ready((function(){var e=t("#learn-press-statistic"),a=t('#learn-press-statistic input[name="from"]'),r=t('#learn-press-statistic input[name="to"]');e.length&&r.change((function(){a.val()&&r.val()&&t("button.button-primary").prop("disabled",!1)}))})),t.fn.LP_Chart_Line=function(e,a){return t.each(this,(function(){const r=t(this),n=t("<canvas />");r.html(""),n.appendTo(r),new Chart(n.get(0).getContext("2d")).Line(e,a)}))},t.fn.LP_Statistic_Users=function(){if(0!==parseInt(t(this).length))return t.each(this,(function(){var e=t(".chart-buttons button").on("click",(function(){var a=t(this),r=a.data("type"),n="",s="",i=t("#learn-press-chart"),o=t(".lp-chart__loading");if(e.not(this).not('[data-type="user-custom-time"]').prop("disabled",!1),"user-custom-time"==r){if(n=t('#learn-press-statistic input[name="from"]').val(),s=t('#learn-press-statistic input[name="to"]').val(),""==n||""==s)return!1}else a.prop("disabled",!0);return o.addClass("active"),t.ajax({url:"admin-ajax.php",data:{action:"learnpress_load_chart",type:r,range:[n,s]},dataType:"text",success:function(t){t=LP.parseJSON(t),i.LP_Chart_Line(t,LP_Chart_Config),o.removeClass("active")}}),!1})),a=t('.chart-buttons #user-custom-time input[type="text"]').change((function(){e.filter('[data-type="user-custom-time"]').prop("disabled",a.filter((function(){return""==this.value})).get().length||!function(){if(new Date(a[0].value)<new Date(a[1].value))return!0}())}))}))},t.fn.LP_Statistic_Courses=function(){if(0!==parseInt(t(this).length))return t.each(this,(function(){var e=t(".chart-buttons button").on("click",(function(){var a=t(this),r=a.data("type"),n="",s="",i=t("#learn-press-chart"),o=t(".lp-chart__loading");if(e.not(this).not('[data-type="course-custom-time"]').prop("disabled",!1),"course-custom-time"==r){if(n=t('#learn-press-statistic input[name="from"]').val(),s=t('#learn-press-statistic input[name="to"]').val(),""==n||""==s)return!1}else a.prop("disabled",!0);return o.addClass("active"),t.ajax({url:"admin-ajax.php",data:{action:"learnpress_load_chart",type:r,range:[n,s]},dataType:"text",success:function(t){console.log(t),t=LP.parseJSON(t),i.LP_Chart_Line(t,LP_Chart_Config),o.removeClass("active")}}),!1})),a=t('.chart-buttons #course-custom-time input[type="text"]').change((function(){e.filter('[data-type="course-custom-time"]').prop("disabled",a.filter((function(){return""==this.value})).get().length||!function(){if(new Date(a[0].value)<new Date(a[1].value))return!0}())}))}))},t.fn.LP_Statistic_Orders=function(){if(0!==parseInt(t(this).length)){t(".panel_report_option").hide(),t("#panel_report_sales_by_"+t("#report_sales_by").val()).show(),t("#report_sales_by").on("change",(function(){t(".panel_report_option").hide(),t("#panel_report_sales_by_"+t(this).val()).show(),"date"==t(this).val()&&e()}));var e=function(){var e,a="",r="",n="",s=0,i=0;e=t("#report_sales_by").val(),load_area=t(".lp-chart__loading"),$container=t("#learn-press-chart");var o=t(".chart-buttons button:disabled").not('[data-type="order-custom-time"]');if(parseInt(o.length)>0)a=t(o[0]).data("type");else if(a="order-custom-time",r=t('#learn-press-statistic input[name="from"]').val(),n=t('#learn-press-statistic input[name="to"]').val(),""==r||""==n)return!1;"course"===e?i=t("#report-by-course-id").val():"category"===e&&(s=t("#report-by-course-category-id").val()),load_area.addClass("active"),t.ajax({url:"admin-ajax.php",data:{action:"learnpress_load_chart",type:a,range:[r,n],report_sales_by:e,course_id:i,cat_id:s},dataType:"text",success:function(t){t=LP.parseJSON(t),$container.LP_Chart_Line(t,LP_Chart_Config),load_area.removeClass("active")}})};t("#report-by-course-id").select2({minimumInputLength:1,placeholder:"Search a course",ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(t){return{q:t.term,action:"learnpress_search_course_by_name"}},processResults:function(t){if(t)return{results:t}},cache:!0}}),t("#report-by-course-id").change((function(){e()}));var a=t(".chart-buttons button").on("click",(function(){var r=t(this),n=r.data("type");t("#learn-press-chart");return a.not(this).not('[data-type="order-custom-time"]').prop("disabled",!1),"order-custom-time"!==n&&(r.prop("disabled",!0),t('#learn-press-statistic input[name="from"]').val(""),t('#learn-press-statistic input[name="to"]').val("")),e(),!1})),r=t('.chart-buttons #order-custom-time input[type="text"]').change((function(){a.filter('[data-type="order-custom-time"]').prop("disabled",r.filter((function(){return""==this.value})).get().length||!function(){if(new Date(r[0].value)<new Date(r[1].value))return!0}())}))}},t.fn.LP_Statistic_Generals=function(){if(0!==parseInt(t(this).length))return t.each(this,(function(){var e=t(".chart-buttons button").on("click",(function(){var a=t(this),r=a.data("type"),n="",s="",i=t("#learn-press-chart"),o=t(".lp-chart__loading");if(e.not(this).not('[data-type="general-custom-time"]').prop("disabled",!1),"general-custom-time"===r){if(n=t('#learn-press-statistic input[name="from"]').val(),s=t('#learn-press-statistic input[name="to"]').val(),""===n||""===s)return!1}else a.prop("disabled",!0);return o.addClass("active"),t.ajax({url:"admin-ajax.php",data:{action:"learnpress_load_chart",type:r,range:[n,s]},dataType:"text",success:function(t){console.log(t),t=LP.parseJSON(t),i.LP_Chart_Line(t,LP_Chart_Config),o.removeClass("active")}}),!1})),a=t('.chart-buttons .learn-press-statistic-general input[type="text"]').change((function(){e.filter('[data-type="general-custom-time"]').prop("disabled",a.filter((function(){return""==this.value})).get().length||!function(){if(new Date(a[0].value)<new Date(a[1].value))return!0}())}))}))},t((function(){void 0!==t.fn.datepicker&&t(".date-picker").datepicker({dateFormat:"yy/mm/dd"}),t(".learn-press-statistic-users").LP_Statistic_Users(),t(".learn-press-statistic-courses").LP_Statistic_Courses(),t(".learn-press-statistic-orders").LP_Statistic_Orders(),t(".learn-press-statistic-general").LP_Statistic_Generals()}))}(jQuery);